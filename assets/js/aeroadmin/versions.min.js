"use strict";var Version={id:null,init:function(){this.id=$q("#version").data("versionid");$q("#form-wrapper").html("");Version.view.render();var a={onDelete:function(b){if(b.length>0){Aero.confirm({ok:"Delete",title:"Deleting",msg:"You are about to delete <strong>"+b.length+"</strong> version(s)</strong>?",onConfirm:function(){Version.api.del(b)}})}}};new Utils.menu("#menu",a)}};Version.model={url:"api/versions",defaults:function(){return{title:"",description:""}},save:function(){var a=$q("form").aeroSerialize();a.active=(a.active)?true:false;if(Version.id){Version.api.update(a,Version.id)}else{Version.api.create(a)}}};Version.view={table:null,render:function(){var a="versions/table";var b=[{width:"5%",sClass:"center"},{width:"8%",sClass:"center"},{width:"30%"},{width:"5%",sClass:"center"},{width:"20%"},{width:"5%",sClass:"tright"}];this.table=new Utils.datatable(a,b,Version.id);this.setEvents()},setEvents:function(){$q("body").off("click.pathd").on("click.pathd",".delete",function(){var a=$q(this).parents("div:eq(0)").data("id");Aero.confirm({ok:"Delete",title:"Delete version",msg:"Are you sure you want to delete this?",onConfirm:function(){Version.api.del(a)}});return false});$q("body").off("click.pathu").on("click.pathu",".restore",function(){var a=$q(this).parents("div:eq(0)").data("id");Version.api.restore(a,function(b){});return false})}};Version.api={get:function(c,b){var a={};if(c){a={id:c}}Aero.send(Version.model.url,a,function(d){if(b){b(d)}},"GET")},restore:function(a,c){var b={id:Version.id,version:a};Aero.send(Version.model.url,b,function(d){Version.view.table.ajax.reload();if(c){c(d)}},"POST")},del:function(a){Aero.send(Version.model.url,{id:Version.id,version:a},function(){Version.view.table.ajax.reload()},"DELETE")}};$q(function(){Version.init()});