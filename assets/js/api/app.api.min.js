"use strict";var App={id:null};App.model={url:"api/apps",defaults:function(){return{title:"",description:"",active:true}},validate:function(){var d=$q(".saving form").isFormValid();var b=$q('.saving input[name="host"]');var c=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");var a=c.test(b.val());if(b.val()!=IAPP&&!a){d=false;b.addClass("aero-require-error")}return d},save:function(b){var a=b.parents(".card").find("form");var c=a.aeroSerialize();c.active=(c.active)?true:false;c.aliases=[];c.host=c.host.replace(/\/$/,"");$q(".alias-input").each(function(){var d=$q(this).val();if(d){d=d.replace(/\/$/,"");c.aliases.push(d)}});if(App.model.validate()){if(App.id){App.api.update(c,App.id)}else{App.api.create(c)}}}};App.api={get:function(c,b){var a={};if(b){a={id:b}}Aero.send(App.model.url,a,function(d){if(c){c(d)}},"GET")},create:function(a,b){Aero.send(App.model.url,a,function(c){if(c){a.id=c;App.view.updateCard(a);Utils.card.flip($q(".saving form"),true,function(){$q(".saving form").remove();$q(".saving").removeClass("saving");if(b){b(c)}})}else{App.view.renderIssue()}},"POST")},update:function(a,c,b){a.id=c;Aero.send(App.model.url,a,function(d){if(d){App.view.updateCard(d);Utils.card.flip($q(".saving form"),true,function(){$q(".saving").removeClass("saving");if(b){b(d)}})}else{App.view.renderIssue()}},"PUT")},del:function(a){Aero.send(App.model.url,{id:a},function(b){Utils.card.remove($q(".deleting"))},"DELETE")}};