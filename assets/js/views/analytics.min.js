"use strict";require(["api/users","lib/charts","utils/semantic-dropdown"],function(){Chart.defaults.global={animation:true,animationSteps:20,animationEasing:"swing",showScale:true,scaleOverride:false,scaleLineColor:"rgba(0,0,0,.15)",scaleLineWidth:1,scaleShowLabels:true,scaleLabel:"<%=value %>",scaleIntegersOnly:true,scaleBeginAtZero:false,scaleFontFamily:"'Source Sans Pro'",scaleFontSize:15,scaleFontStyle:"400",scaleFontColor:"#25303f",responsive:true,maintainAspectRatio:false,showTooltips:true,customTooltips:false,tooltipEvents:["mousemove","touchstart","touchmove"],tooltipFillColor:"#25303f",tooltipFontFamily:"'Source Sans Pro'",tooltipFontSize:15,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Source Sans Pro'",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:10,tooltipXPadding:10,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:20,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",onAnimationProgress:function(){},onAnimationComplete:function(){}};var a={init:function(){a.view.setEvents();a.view.renderChart1()}};a.model={url:"api/analytics",getChart1:function(c){var b=this;Aero.send(a.model.url+"/completed_started",{},function(d){c(b.etl1(d))},"GET")},getChart2:function(c){var b=this;Aero.send(a.model.url+"/times_taken",{},function(d){c(b.etl2(d))},"GET")},etl1:function(d){var c={labels:[],datasets:[{data:[]},{data:[]}]};for(var b=0;b<d.length;b++){c.labels.push(d[b]["title"]);c.datasets[0].data.push(d[b].stats.started);c.datasets[1].data.push(d[b].stats.completed);c.datasets[0].fillColor="rgb(214,225,229)";c.datasets[0].strokeColor="rgb(168, 184, 190)";c.datasets[1].fillColor="rgba(76, 215, 204, 1)";c.datasets[1].strokeColor="rgba(49, 168, 159, 1)"}return c},etl2:function(d){var c={labels:[],datasets:[{data:[]}]};for(var b=0;b<d.length;b++){c.labels.push(d[b]["title"]);c.datasets[0].data.push(d[b].stats.started);c.datasets[0].fillColor="rgb(214,225,229)";c.datasets[0].strokeColor="rgb(168, 184, 190)";c.datasets[0].highlightFill="rgba(49, 168, 159, 1)";c.datasets[0].highlightStroke="rgba(49, 168, 159, 1)"}return c}};a.view={renderChart1:function(){a.model.getChart1(function(c){var b=document.getElementById("chart-1").getContext("2d");new Chart(b).Line(c)})},renderChart2:function(){a.model.getChart2(function(c){var b=document.getElementById("chart-2").getContext("2d");new Chart(b).Bar(c)})},setEvents:function(){var b=this;$q("a[href=#panel2]").on("click",function(){if(!$q(this).data("rendered")){User.api.get(function(c){$q.each(c,function(e,d){$q('select[name="user_list"]').append('<option value="'+d.email+'">'+d.email+"</option>")})})}})}};$q(function(){a.init();$q(".ui.dropdown").dropdown()})});