"use strict";require(["api/guides","utils/password","utils/export","lib/uploadify"],function(){Guide.view={table:null,init:function(){$q("#form-wrapper").html("");Guide.view.render();var a={onDelete:function(b){if(b.length>0){Aero.confirm({ok:"Delete",title:"Deleting",msg:"You are about to delete <strong>"+b.length+"</strong> item(s)</strong>?",onConfirm:function(){Guide.api.del(b)}})}},onExport:function(b){Utils._export("guide",b)},onClone:function(b){Guide.api.clone(b)}};new Utils.menu("#menu",a)},render:function(){var a="guides/table";var b=[{width:"5%",sClass:"center"},{width:"25%"},{width:"30%"},{width:"5%",sClass:"center"},{width:"5%",sClass:"center"},{width:"5%",sClass:"center"},{width:"20%"},{width:"5%",sClass:"tright"}];console.log(a);this.table=new Utils.datatable(a,b);this.setEvents()},renderForm:function(a){Aero.tpl.get("guide-form.html",function(c){Guide.id=(a)?a.id:null;if(!a){a={}}var b=_q.template(c);Aero.confirm({ok:"save",title:"Guide Information",msg:b({guide:a}),onValidate:function(){return Guide.model.validate()},onConfirm:function(){Guide.model.save()}})})},setEvents:function(){$q("body").off("keypress.sn").on("keypress.sn",function(b){var a=b.keyCode||b.which;if(b.target.tagName=="BODY"&&a=="78"&&b.shiftKey){Guide.view.renderForm()}});$q(".add").off("click.patha").on("click.patha",function(){Guide.view.renderForm();return false});$q("body").off("click.pathd").on("click.pathd",".delete",function(){var b=$q(this).parents("div:eq(0)").data("id");var a=$q(this).parents("tr").find("td:eq(1)").text();Aero.confirm({ok:"Delete",title:a,msg:"Are you sure you want to delete this?",onConfirm:function(){Guide.api.del(b)}});return false});$q("body").off("click.pathe").on("click.pathe",".edit",function(){var a=$q(this).parents("div:eq(0)").data("id");Guide.api.get(function(b){Guide.view.renderForm(b)},a);return false});$q("body").off("click.pathf").on("click.pathf",".trash",function(){window.location.href="/app/"+AeroStep.host+"/trash";return false})}};$q(function(){Guide.view.init();setTimeout(function(){new Utils._import("#import",{uploader:"/api/import_guide",width:177},function(){Guide.view.table.ajax.reload()})},0)})});