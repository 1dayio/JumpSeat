"use strict";require(["api/rolemap-user"],function(){RoleUserMap.view={table:null,init:function(){if(this.initialized){return}this.initialized=true;$q("#roleusermap .form-wrapper").html("");RoleUserMap.view.render();var a={onDelete:function(b){if(b.length>0){Aero.confirm({ok:"un-link",title:"Removing User Links",msg:"Are you sure you want to remove the association for "+b.length+" items?",onConfirm:function(){RoleUserMap.api.del(b)}})}}};new Utils.menu("#menuUser",a)},render:function(){var a="roleusermap/table?roleid="+Rolemap.roleid;var b=[{width:"5%",sClass:"center"},{width:"30%"},{width:"50%"},{width:"5%",sClass:"center"},{width:"10%",sClass:"tright"}];this.table=new Utils.datatable(a,b);this.table.columns.adjust().draw();this.setEvents()},renderForm:function(){var a=this;Aero.tpl.get("roleusermap-form.html",function(b){RoleUserMap.api.getUsers(function(){var c=_q.template(b);Aero.confirm({ok:"Save",title:"Associate to this role",msg:c({users:RoleUserMap.USERS}),onConfirm:function(){RoleUserMap.model.save()}})})})},setEvents:function(){$q("ul.tabs a:eq(1)").off("click.tab").on("click.tab",function(a){RoleUserMap.view.init()});$q("#roleusermap .add").off("click.ua").on("click.ua",function(){RoleUserMap.view.renderForm();return false});$q("body").off("click.ud").on("click.ud","#roleusermap .delete",function(){var b=$q(this).parents("div:eq(0)").data("id");var a=$q(this).parents("tr:eq(0)").find("td:eq(1)").text();Aero.confirm({ok:"un-link",title:a,msg:"Are you sure you want to un-link this user?",onConfirm:function(){RoleUserMap.api.del(b)}});return false})}}});